{% load static %}
<header class="app-topbar" role="banner">
  <div class="d-flex align-items-center gap-3">
    <button id="layoutMobileToggle" class="btn btn-outline-secondary d-lg-none" type="button" aria-label="Abrir menu lateral">
      <i class="bi bi-list"></i>
    </button>
    <div>
      <span class="app-topbar__eyebrow text-uppercase text-muted small fw-semibold d-block">
        Resolve Sistemas de Engenharia
      </span>
      <h1 class="app-topbar__title mb-0">{{ page_title|default:"Início" }}</h1>
    </div>
  </div>
  <div class="d-flex align-items-center flex-wrap gap-2 justify-content-end">
    <!-- Save/Load Project Buttons -->
    <div class="btn-group me-2" role="group" aria-label="Gerenciamento de projeto">
      <button type="button" class="btn btn-outline-success btn-sm" id="resolve-btn-save" 
        data-bs-toggle="tooltip" title="Salvar projeto (.resolve)">
        <i class="bi bi-download"></i>
        <span class="d-none d-lg-inline ms-1">Salvar</span>
      </button>
      <button type="button" class="btn btn-outline-success btn-sm" id="resolve-btn-load" 
        data-bs-toggle="tooltip" title="Carregar projeto (.resolve)">
        <i class="bi bi-upload"></i>
        <span class="d-none d-lg-inline ms-1">Carregar</span>
      </button>
    </div>
    <button id="themeToggleGlobal" class="btn btn-outline-primary" type="button" data-bs-toggle="tooltip" title="Alternar tema">
      <i class="bi bi-moon"></i>
      <span class="d-none d-xl-inline ms-1">Tema</span>
    </button>
    <a href="{% url 'usuarios:dashboard' %}" class="btn {% if user.is_authenticated %}btn-outline-primary{% else %}btn-primary{% endif %}">
      <i class="bi bi-shield-lock me-1"></i>Área Restrita
    </a>
    {% if user.is_authenticated %}
      <a href="{% url 'usuarios:public_home' %}" class="btn btn-outline-secondary">
        <i class="bi bi-globe2 me-1"></i>Área Pública
      </a>
      <form action="{% url 'usuarios:logout' %}" method="post" class="d-inline">
        {% csrf_token %}
        <button class="btn btn-outline-danger" type="submit" data-bs-toggle="tooltip" title="Sair">
          <i class="bi bi-box-arrow-right"></i>
        </button>
      </form>
    {% else %}
      <a href="{% url 'usuarios:login' %}" class="btn btn-outline-secondary" data-bs-toggle="tooltip" title="Entrar">
        <i class="bi bi-box-arrow-in-right"></i>
      </a>
      <a href="{% url 'usuarios:register' %}" class="btn btn-primary" data-bs-toggle="tooltip" title="Criar conta">
        <i class="bi bi-person-plus"></i>
      </a>
    {% endif %}
    {% block extra_header_actions %}{% endblock %}
  </div>
</header>
